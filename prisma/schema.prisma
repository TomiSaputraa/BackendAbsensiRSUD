generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id_user         String       @id @unique @db.VarChar(7)
  password_hash   String       @db.VarChar(60)
  nama_lengkap    String       @db.VarChar(255)
  jenis_kelamin   JenisKelamin @default(pria)
  email           String?      @db.VarChar(255)
  no_hp           String?      @db.VarChar(15)
  foto_profil     String       @db.VarChar(255)
  bergabung_sejak DateTime?    @default(now()) @db.DateTime()
  role            String?      @default("user") @db.VarChar(10)
  Absensi         Absensi[]
  Izin            Izin[]
  Cuti            Cuti[]
  Sakit           Sakit[]
  UbahJadwal      UbahJadwal[]
}

enum JenisKelamin {
  pria
  wanita
}

model Absensi {
  id_abi           Int      @id @unique @default(autoincrement())
  id_user          String   @db.VarChar(7)
  idUser           User     @relation(fields: [id_user], references: [id_user])
  tanggal_absensi  DateTime @default(now()) @db.Date
  jam_masuk_absesi DateTime @default(now()) @db.Time()
  latitude_masuk   String?  @db.VarChar(30)
  longitude_masuk  String?  @db.VarChar(30)
  longtitude_masuk String?  @db.VarChar(30)
  ip_address       String?  @db.VarChar(30)
  latitude_keluar  String?  @db.VarChar(30)
  longitude_keluar String?  @db.VarChar(30)
  telat_masuk      String?  @db.VarChar(10)
  telat_keluar     String?  @db.VarChar(10)
  foto_masuk       String?  @db.VarChar(255)
  status_hadir     String?  @db.VarChar(1)
}

model Izin {
  id_izin              Int        @id @unique @default(autoincrement()) @db.Int()
  id_user              String     @db.VarChar(7)
  tanggal_mulai_izin   DateTime   @db.Date
  tanggal_selesai_izin DateTime   @db.Date
  tanggal_input_izin   DateTime   @db.DateTime()
  alasan_izin          String     @db.VarChar(255)
  total_hari_izin      Int        @db.Int()
  status_izin          StatusIzin @default(PENDING)
  user                 User       @relation(fields: [id_user], references: [id_user])
}

enum StatusIzin {
  PENDING
  DITERIMA
  DITOLAK
}

model Cuti {
  id_cuti              Int        @id @unique @default(autoincrement()) @db.Int()
  id_user              String     @db.VarChar(7)
  tanggal_mulai_cuti   DateTime   @db.Date
  tanggal_selesai_cuti DateTime   @db.Date
  tanggal_input_cuti   DateTime   @db.DateTime()
  alasan_cuti          String     @db.VarChar(255)
  total_hari_cuti      Int        @db.Int
  status_cuti          StatusCuti @default(PENDING)
  user                 User       @relation(fields: [id_user], references: [id_user])
}

enum StatusCuti {
  PENDING
  DITERIMA
  DITOLAK
}

model Sakit {
  id_sakit              String      @id @unique @db.VarChar(7)
  id_user               String      @db.VarChar(7)
  tanggal_mulai_sakit   DateTime    @db.Date
  tanggal_selesai_sakit DateTime    @db.Date
  tanggal_input_sakit   DateTime    @db.DateTime()
  alasan_sakit          String      @db.VarChar(255)
  bukti_foto            String      @db.VarChar(255)
  total_hari_sakit      Int         @db.Int
  status_sakit          StatusSakit @default(PENDING)
  user                  User        @relation(fields: [id_user], references: [id_user])
}

enum StatusSakit {
  PENDING
  DITERIMA
  DITOLAK
}

model UbahJadwal {
  id_jadwal                Int              @id @default(autoincrement())
  id_user                  String           @db.VarChar(7)
  tanggal_input_ubahJadwal DateTime         @db.DateTime()
  jam_input_ubahJadwal     DateTime         @db.DateTime()
  jam_ubahJadwal           DateTime         @db.DateTime()
  tanggal_ubahJadwal       DateTime         @db.Date
  alasan_ubahJadwal        String           @db.VarChar(255)
  status_ubahJadwal        StatusUbahJadwal @default(PENDING)
  user                     User             @relation(fields: [id_user], references: [id_user])
}

enum StatusUbahJadwal {
  PENDING
  DITERIMA
  DITOLAK
}
